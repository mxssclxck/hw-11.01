# 11.1. «Базы данных, их типы» - НиконоровДА FOPS-6

## Задание 1. СУБД
**Кейс**
**Крупная строительная компания, которая также занимается проектированием и  девелопментом, решила создать правильную архитектуру для работы с данными.  Ниже представлены задачи, которые необходимо решить для каждой предметной области.**

**Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?**

**1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.  СУБД должна гарантировать целостность и чёткую структуру данных.**

**1.1.★ Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?**

**1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам.  Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.**

**1.2.★ Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?**

**1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее,  сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.**

**1.3.★ Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?**

**1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и  распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.**

**1.4.★ Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?**

**1.5.★ Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?**

```
1.1. Использование реляционной БД - например PostgreSQL.
Так как данные хранящиеся в БД представляют собой совокупность схем отношений связанных друг с
другом столбцов что позавляет надежно хранить данные и обрабатывать.

Возможно использование NoSQL документарной БД (MongoDB).
Данный тип БД позволяет хранить объекты с произвольными наборами значений, у
платежного поручения будут одни поля, у приказа – другие.
И все это хранится в одном и том же сегменте БД, без подразделения на примитивные таблицы.

1.1.★ MongoDB API, но для оптимизации хеширования необходимо сторонии приложения.

1.2. Возможно использовать под задачу релеционную базу данных, например PostgreSQL, так как
таблицы разрозненые и связь между ними нет

1.2.★ Использованием БД PostgreSQL можно решить данную задачу.

1.3. Также использовать документарную БД (MongoDB)

1.3.★ MongoDB возожно использовать под данную задачу

1.4. Использовать БД ключь - значение, например Riak

1.4.★ Возможно, но в будущем с ростом количества таблиц в БД,
возможно столкнуться с проблемами производительности.
Так как с ростом обьемов данных поддержание уникальных ключей может стать проблемой
(так как БД такого типа как правило используют хеш-таблицы,
в которой находится уникальный ключ и указатель на конкретный объект данных).

1.5.★ Все задачи можно решить реляционной БД, например PostgreSQL
```

## Задание 2. Транзакции
**2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово,  какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.**

**2.1.★ Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?**

*Приведите ответ в свободной форме.*

```
2.1.
1. В БД происходит поиск пользователя (пополняющего по номеру телефона)
2. Проверить сколько денежных средств на счету у данного пользователя сейчас
3. На какую сумму клиент хочет пополнить баланс
4. Получение из банка подтверждение, что требуемая сумма была переведена и 
она равна той сумме, которой клиент пополняет баланс
5. Добавление к текущему значению баланса сумму которая была пополнена клиентом
6. Отправить клиенту подтверждение, что на счет поступил платеж

2.1.★

1. Определить как автоплатеж будет проведен (по дате или по достижение определенной суммы на счету)
2. Проверка остатка средств на балансе клиента или сравнение даты прошлого полнения сравнить его с
(датой или по достижению порога суммы на счету), 
если условия выполняются переходим к следующим шагам, иначе прерываем проверку
3. По введенным платежным данных клиента проводим перевод средств
4. Списывание средств согласно заданному порогу автоплатежа или (согласно тарифу)
5. Добавление к текущему значению баланса сумму 
6. Отправить клиенту подтверждение, что на счет поступил платеж
```
## Задание 3. SQL vs NoSQL
**3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.**

**3.1.★ Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.**

*Приведите ответ в свободной форме.*

```
3.1.
* Решение которое давно на рынке: MySQL — крайне развитая СУБД,
что означает наличие большого сообщества вокруг неё, множество примеров и высокую надёжность;
* Совместимость: MySQL доступна на всех основных платформах,
включая Linux, Windows, Mac, BSD и Solaris.
Также у неё есть библиотеки для языков вроде Node.js, Ruby, C#, C++, Java, Perl, Python и PHP;
* Окупаемость: Это СУБД с открытым исходным кодом, находящаяся в свободном доступе;
* Реплицируемость: Базу данных MySQL можно распределять между несколькими узлами,
таким образом уменьшая нагрузку и улучшая масштабируемость и доступность приложения;
* Шардинг: В то время как шардинг невозможен на большинстве
SQL баз данных, MySQL является исключением.

3.1.★
Он вводит новую реализацию в традиционные реляционные базы данных.
Он объединяет преимущества SQL и NoSQL. Легко переключаться между
типом и потребностями пользователя.
Оптимизация обработки онлайн-транзакций, масштабируемость, гибкость и бессерверная архитектура.
При этом структуры NewSQL, как и реляционные базы данных,
поддерживают принципы ACID и согласованность.
Они могут масштабироваться, зачастую по запросу, не влияя на логику
приложения и не нарушая модель транзакций.
Гибкость и бессерверная архитектура в сочетании с высокой степенью безопасности и
доступности без применения резервных систем.
Наиболее популярные базы данных NewSQL: ClustrixDB, CockroachDB, NuoDB, MemSQL и VoltDB.
```
## Задание 4. Кластеры
**Необходимо производить большое количество вычислений при работе с огромным  количеством данных, под эту задачу выделено 1000 машин.**

**На основе какого критерия будете выбирать тип СУБД и какая модель  распределённых вычислений здесь справится лучше всего и почему?**

*Приведите ответ в свободной форме.*

```
Под данную задачу возможно использовать БД Redis.
Redis – это система управления базами данных класса NoSQL (не реляционные СУБД),
размещаемых целиком в оперативной памяти.
Для доступа к данным используется модель «ключ» — «значение».
Такая СУБД используется зачастую для хранения кэшей в масштабируемых сервисах,
для хранения изображений и данных небольшого размера.

Широкое распространение СУБД Redis получила за счет:

1. высокой скорости работы, т.к. все данные хранятся в оперативной памяти;
2. кроссплатформенности;
3. распространению по BSD лицензии (относится к СПО).

В варианте настройки кластеризации Redis Cluster,
решением для создания и управления кластером с сегментацией и репликацией данных.
Выполняет задачи управления узлами, репликации, синхронизации данных на узлах и обеспечения
доступа клиентского приложения к MASTER-узлу в случае выхода из строя одного из нескольких
MASTER-узлов Redis Cluster работает в режиме мультимастера, у каждого
MASTER-узла может быть один или более SLAVE-узлов (до 1000).
```
